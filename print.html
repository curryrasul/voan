<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>VOAN</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="voan.html"><strong aria-hidden="true">1.</strong> VOAN</a></li><li class="chapter-item expanded "><a href="overview.html"><strong aria-hidden="true">2.</strong> Overview</a></li><li class="chapter-item expanded "><a href="motivation.html"><strong aria-hidden="true">3.</strong> Motivation</a></li><li class="chapter-item expanded "><a href="how-it-works.html"><strong aria-hidden="true">4.</strong> How it works</a></li><li class="chapter-item expanded "><a href="how-to-use.html"><strong aria-hidden="true">5.</strong> How to use</a></li><li class="chapter-item expanded "><a href="roadmap.html"><strong aria-hidden="true">6.</strong> Roadmap</a></li><li class="chapter-item expanded "><a href="useful-links.html"><strong aria-hidden="true">7.</strong> Useful links</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">VOAN</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 align="center">VoAn - ANonymous VOting platform on NEAR</h1>
<!-- <p align="center">
    <img src="./images/voan-logo.jpeg" width="150">
</p> -->
<p align="center">
    <a href="http://voan.site">
        <i>
            TRY THE APP HERE
        </i>
    </a>
</p>
<p>One of the key requirements for voting is <strong>privacy</strong>. There is no <em>privacy-by-default</em> on the NEAR Protocol. The main motivation for VoAn comes from the experience of participating in DAOs: you cannot vote against the proposal, because you may offend someone. Anonymity would be a great option.</p>
<p align="center"><i><b>Privacy is normal!</b></i></p>
<hr />
<p>On this web-site you can find info on:</p>
<ul>
<li><a href="./how-it-works.html">How <strong>voan</strong> works</a></li>
<li><a href="./how-to-use.html">How to use <strong>voan</strong></a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="overview"><a class="header" href="#overview">Overview</a></h1>
<p>VoAn is a platform that enables anonymous voting. The project was created for the <a href="https://metabuild.devpost.com/">Metabuild III Hackathon</a>. Currently supports maximum of 8 participants.</p>
<p>To learn how to use it check the <a href="./how-to-use.html">how to use</a> section. To learn how it works check the <a href="./how-it-works.html">how it works</a> section.</p>
<p><em>Smart-contract is running on <a href="https://explorer.testnet.near.org/accounts/v1.voan.testnet">v1.voan.testnet</a></em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="motivation"><a class="header" href="#motivation">Motivation</a></h1>
<p>The complete transparency and distributed nature of the blockchain makes it hard to operate in a private manner. Transactions between wallets, smart contract calls and their results are considered public data and are readily available to anyone. Where some use cases substantially benefit from the transparency of the blockchain, there are a wide range of applications where privatization is instrumental for their progress.</p>
<p>One such application is voting. With blockchain igniting the paradigm shift to user ownership and control, many aspects of applications, organizations and the protocols themselves rely on voting for an endless variety of aspects. From voting on protocol changes, community votes on roadmap changes, to DAO voting on investment decisions, trust-less voting mechanisms have been prime use cases for the blockchain.</p>
<p>However, voting is an application that suffers from over transparency. Knowing that your vote is public information may potentially impact what you vote for, furthermore, whether you voted or not may also impact your standings within a community or organization; this can be especially imagined within a small DAO setting. What is needed is a solution which provides trust-less voting for any purpose while retaining the privacy of the voters.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-it-works"><a class="header" href="#how-it-works">How it works</a></h1>
<h2 id="abstract"><a class="header" href="#abstract">Abstract</a></h2>
<p>As everything on the blockchains is visible to others (f.e. you cannot send tokens to your friends privately) it is impossible to build privacy preserving apps on modern blockchains (NEAR Protocol, Ethereum) without the help of other primitives. The main component which enables us to build such apps is <em>zk-cryptography</em>: at its core, it allows us to prove that we know some information, without revealing that information. For example: for some publicly-known number \(c\), I can prove that I know factors \(a\) and \(b\) (without revealing them), such that \(a * b = c\). This notion can be taken further to essentially prove that a party belong to a certain set without revealing which party they are (this is what is known as a proof of set membership). Zero knowledge group membership is actually the key mechanism behind anonymous voting. Let's divide the process into several stages:</p>
<ol>
<li>Voting creation/initialization</li>
<li>Voting itself</li>
</ol>
<p>In the first step, the host of a voting sets the rules for the vote: which proposal, deadlines, jury list/whitelist, etc. The main thing here is the whitelist. This whitelist contains the public keys of participants authorized to take part in the vote. </p>
<p>In the second step, participants can vote. They do so by proving their knowledge of a private key that matches their public key and that this exact public key is in the whitelist. 
By that, participants don't reveal themselves directly but are still able to prove that they have the right to vote (if a person was not on the whitelist, he would not be able to create such evidence).</p>
<p>There are few problems with this naive scheme, some of which you might have noticed yourself:</p>
<ol>
<li>Participants can vote more than once</li>
<li>Participants will reveal themselves if they call the transaction from their publicly known address/account</li>
</ol>
<p>Let's discuss the second problem first. As already mentioned, due to the transparency of the blockchain, if a participant calls a vote-transaction from his address, he will reveal his identity. One of the solutions can come to mind is to create a new account and vote from it. But in blockchains, you have to pay a GAS fee for execute contract calls. So, you would need to top up the balance of a new account, but if you do so, it will be easy to establish a connection between a publicly known account and this new one. Seems impossible now ... But, actually we can delegate the transaction call to a separate person - <em>relayer</em>, who will pay for our transaction. By doing so, we don't even need to interact with the blockchain (the relayer will do it for us). There are few problems with that too, but they are solvable:</p>
<ul>
<li>Relayer can frontrun (change our vote value) - this can be solved if the proof depends on the vote value (so if he changes it, the proof will become invalid and be rejected by the smart contract)</li>
<li>Relayer can censor votes - this can be solved if there are many relayers</li>
<li>Relayer need money/other motivation to work - this can be solved with an incentive mechanism or if host pays fees to relayers</li>
</ul>
<p>Before we move to the first problem (double voting), it's important to say that the use of real blockchain accounts (namely, the creation of proofs of ownership of a private key) is not a ZK-Friendly operation (you as a client will create such a proof for a very long time), that's why we need to think about other ways to do it ... one solution is by adding an additional stage - <strong>registration</strong>. Here we will randomly generate a secret number and send the <em>commitment</em> (hash of the secret number) to the smart-contract such that the <em>commitment</em> will mimic the role of the public key; and of course - we can make proving the knowledge of the preimage of the hash-function ZK-Friendly.</p>
<p>Now, let's discuss how to solve the first problem ... the solution is really simple: at the registration stage, instead of generating one number (\(secret\)), you can generate another one (let's call it \(nullifier)\) ​​and \(commitment = Hash(secret, nullifier)\). Then, at the voting stage, when we make a ZK proof, we will reveal the \(nullifier\). This way we never reveal the secrets to generate a full proof, but since each proof we produce will be using the same nullifier, if the smart contract keeps track of used nullifiers, we won't be able to vote twice.</p>
<h3 id="voting-creationinitialization"><a class="header" href="#voting-creationinitialization">Voting creation/initialization</a></h3>
<p align="center">
    <img src="./images/creating.png" width="650">
</p>
<p align="center">
    <i>Voting creation scheme</i>
</p>
<p>Done by host as described earlier.</p>
<h3 id="registration"><a class="header" href="#registration">Registration</a></h3>
<p align="center">
    <img src="./images/registration.png" width="650">
</p>
<p align="center">
    <i>Registration scheme</i>
</p>
<p>Users from the whitelist can sign up for voting by submitting a commitment = \(Hash(secret, nullifier)\).</p>
<h3 id="voting"><a class="header" href="#voting">Voting</a></h3>
<p align="center">
    <img src="./images/voting.png" width="650">
</p>
<p align="center">
    <i>Voting scheme</i>
</p>
<p>Participants choose a vote option (yes or no) 
and vote through the relayer, by creating a ZK proof <em>locally</em> (by using their secret) that they are one of the registered members and then sending the proof him.</p>
<h2 id="tech-stack"><a class="header" href="#tech-stack">Tech stack</a></h2>
<p>Programming languages: </p>
<ul>
<li>Rust - <a href="./contract/">Smart-contract</a>, <a href="./tests/">tests</a></li>
<li>Circom - <a href="./circuits/">zkSNARK circuits</a></li>
<li>NodeJS - <a href="./relayer/">Relayer</a></li>
<li>JS | React | SnarkJS - <a href="./web-ui/">WebUI</a> + ZK proofs generation</li>
</ul>
<p>Primitives:</p>
<ul>
<li>Groth16 proving scheme - used for a zkp-side (arkworks-rs/groth16 + electron-labs/verifier &amp; SnarkJS + Circom)</li>
<li><a href="./contract/src/merkle_tree.rs">Merkle Tree</a> + <a href="https://github.com/tzilkha/mimc-sponge-rs">MiMCSponge</a> (fully implemented by our team)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-to-use"><a class="header" href="#how-to-use">How to use</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="roadmap"><a class="header" href="#roadmap">Roadmap</a></h1>
<ol>
<li>Reimplement Merkle Tree (make it sparse/optimal) and refactor smart-contract</li>
<li>Reimplement Groth16 on-chain verification with NEAR Core's bn254 precompiles</li>
<li>Recompile circuits (add support for bigger Merkle trees)</li>
<li>Partnership with AstroDAO or building our own platform with tokenomics &amp; rewards for relayers</li>
<li>Web-site design &amp; refactoring</li>
<li>Beta version launch</li>
<li>Multiple relayers network launch</li>
<li>Smart-contract audit &amp; circuits audit</li>
<li>Mainnet launch</li>
<li>Rewards for relayers</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="useful-links"><a class="header" href="#useful-links">Useful links</a></h1>
<ul>
<li><a href="http://voan.site">VoAn App</a></li>
<li><a href="https://github.com/curryrasul/voan">GitHub Repo</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
    </body>
</html>
